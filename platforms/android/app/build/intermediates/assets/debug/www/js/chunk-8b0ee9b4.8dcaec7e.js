(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8b0ee9b4"],{"20d6":function(t,e,s){"use strict";var i=s("5ca1"),n=s("0a49")(6),a="findIndex",o=!0;a in[]&&Array(1)[a](function(){o=!1}),i(i.P+i.F*o,"Array",{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")(a)},"214a":function(t,e,s){},"4af1":function(t,e,s){"use strict";var i=s("214a"),n=s.n(i);n.a},"6b22":function(t,e,s){"use strict";var i=s("d0e9"),n=s.n(i);n.a},"8c36":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loading"},[s("mt-spinner",{attrs:{size:60,color:"rgba(128,213,156,1)",type:"fading-circle"}})],1)},n=[],a={name:"Loading",data:function(){return{}}},o=a,c=(s("4af1"),s("2877")),r=Object(c["a"])(o,i,n,!1,null,null,null);r.options.__file="Loading.vue";e["a"]=r.exports},"90df":function(t,e){t.exports="data:image/png;base64,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"},"9d90":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"subjectiveShow"},[i("classroom-header",{attrs:{header:t.header}}),t.pageShow?i("div",{staticClass:"content"},[i("div",{staticClass:"subjective_warp"},[i("subjective",{attrs:{subjectiveTopic:t.subjectiveMsg},on:{subjectiveId:t.subjectiveId}}),i("div",{staticClass:"button_warp"},[i("div",{staticClass:"subjective_submit",on:{click:function(e){t.zz(t.subjectiveMsg.questionId)}}},[t._v("批改答案\n        ")]),1==t.cover_box?i("div",{staticClass:"subjective_submit_box",on:{click:t.qq}},[t._v("确认批改")]):t._e()]),i("board",{attrs:{id:this.topicId,subjectiveAnswer:t.subjectiveAnswer}})],1)]):t._e(),t.pageShow?i("div",{staticClass:"footer"},[i("div",{staticClass:"score"},[t._v("\n      得分: "+t._s(t.scores)+" \n      "),i("span",{staticClass:"iconfont edit",on:{click:t.score}},[t._v("")]),i("mt-popup",{model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[t.inputState?i("div",{staticClass:"popup_warp"},[i("div",{staticClass:"title"},[t._v("请输入分数")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.fraction,expression:"fraction"}],staticClass:"inputScore",attrs:{type:"text"},domProps:{value:t.fraction},on:{input:function(e){e.target.composing||(t.fraction=e.target.value)}}}),i("div",{staticClass:"operation"},[i("div",{on:{click:t.determine}},[t._v("是")]),i("div",{on:{click:t.signOut}},[t._v("否")])])]):t._e(),t.warningState?i("div",{staticClass:"warning_warp"},[i("div",{staticClass:"img_warp"},[i("img",{attrs:{src:s("90df")}})]),i("div",{staticClass:"title"},[t._v("警告")]),i("div",{staticClass:"text"},[t._v("您输入的分数有误")]),i("div",{staticClass:"close",on:{click:t.upperLevel}},[t._v("知道了")])]):t._e()])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:t.sharebtn,expression:"sharebtn"}],staticClass:"share",on:{click:t.share}},[t._v("共享")]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.buttonSate,expression:"buttonSate"}],staticClass:"submit",on:{click:t.submited}},[t._v("提交")])]):t._e(),t.loading?i("loading"):t._e()],1)},n=[],a=(s("28a5"),s("7f7f"),s("20d6"),s("96cf"),s("1da1")),o=s("be94"),c=(s("5fc6"),s("5af2")),r=s.n(c),u=s("d67f"),d=s("c2d9"),l=s("b5a9"),b=s("8c36"),v=s("711b"),h=s("2f62"),p=s("4360"),g={components:{ClassroomHeader:u["a"],subjective:d["a"],board:l["a"],Loading:b["a"]},data:function(){return{correction:!1,sharebtn:"",imgawer:"",cover_box:0,picUrl:"",subjectiveId:"",loading:!0,pageShow:!1,header:{title:this.teacherName,url:"/subjectiveDetails"},subjectiveTopic:[{id:1,type:"subjective",title:"主观题-1",content:"有两根铁丝，第一根用去 米，第二根用去 ，剩下的一样长，两根铁丝和原来相比如何。"}],scores:"",popupVisible:!1,inputState:!1,warningState:!1,subjectiveAnswer:[],subjectiveMsg:{},fraction:"",answerId:"",picForSubjective:"",buttonSate:!1}},watch:{boardImg:function(t){var e=this;this.buttonSate=!1;for(var s=0;s<this.subjectiveAnswer.length;s++)this.subjectiveAnswer[s].id===this.subjectiveId&&(this.subjectiveAnswer[s].answer=t.data,Object(v["o"])(t.data).then(function(t){e.picForSubjective=t.data.data.stubForSubjective,r()({message:"储存图片成功",position:"bottom"}),e.buttonSate=!0}).catch(function(t){console.log(t),r()({message:"储存图片失败",position:"bottom"}),e.buttonSate=!0}))}},mounted:function(){this.getCourseId(),this.getSubjectPic()},computed:Object(o["a"])({},Object(h["b"])(["isBoard","boardImg","topicId","title","teacherName","teacherId","studentId"])),methods:{qq:function(){this.bse(),$(".answer").jSignature("disable")},zz:function(t){this.subjectiveId=t,this.cover_box=1,this.correction=!1,$(".answer").jSignature({width:"100%",height:"100%",color:"red",backcolor:"blue",cssclass:"backcolor",lineWidth:1}),$(".answer").jSignature("enable")},getCourseId:function(){this.stubForSubjective=this.$route.query.url},getSubjectPic:function(){var t=this;Object(v["h"])(this.topicId).then(function(e){console.log(e),t.subjectiveMsg=e.data.data,t.subjectiveMsg.title=t.title;for(var s=0;s<t.subjectiveMsg.answerForStudent.length;s++)t.subjectiveMsg.answerForStudent[s].studentId===t.studentId&&(t.sharebtn=t.subjectiveMsg.answerForStudent[s].result,t.subjectiveMsg.answerForStudent[s].result&&(t.picForSubjective=t.subjectiveMsg.answerForStudent[s].reviseForSubjective));t.getImg(),t.pageShow=!0,t.loading=!1}).catch(function(t){console.log(t)})},getImg:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this,s=void 0,s=e.subjectiveMsg.answerForTeacher?e.subjectiveMsg.answerForTeacher[e.subjectiveMsg.answerForTeacher.findIndex(function(t){return t.studentId==e.studentId})]:e.subjectiveMsg.answerForStudent[e.subjectiveMsg.answerForStudent.findIndex(function(t){return t.studentId==e.studentId})],t.prev=3,t.next=6,Object(v["k"])("PASS"===s.result?s.reviseForSubjective:s.stubForSubjective);case 6:i=t.sent,e.answerId=s.answerId,console.log(i.data.data),e.picForSubjective=i.data.data.name,i.data.data&&(e.picUrl=i.data.data.content,e.subjectiveAnswer.push({id:e.topicId,answer:e.picUrl}),e.buttonSate=!0),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](3),console.log(t.t0);case 16:case"end":return t.stop()}},t,this,[[3,13]])}));function e(){return t.apply(this,arguments)}return e}(),score:function(){this.popupVisible=!0,this.inputState=!0},determine:function(){this.inputState=!1,""!==this.fraction?(this.popupVisible=!1,this.inputState=!1,this.scores=this.fraction):this.warningState=!0},signOut:function(){this.popupVisible=!1,this.inputState=!1,this.warningState=!1},upperLevel:function(){this.inputState=!0,this.warningState=!1},modifyAnswer:function(t){this.subjectiveId=t;for(var e="",s=0;s<this.subjectiveAnswer.length;s++)t===this.subjectiveAnswer[s].id&&(e=this.subjectiveAnswer[s].answer);window.HandwrittenBoard.isConnect(function(t){console.log(t)},function(t){switch(console.log(t),t.data.status){case 0:p["a"].commit("SET_BLUETOOTH",!0),window.HandwrittenBoard.exploration(),console.log("第一个");break;case 2:window.HandwrittenBoard.getBase64img(e),console.log("第二个");break;default:break}})},submited:function(){var t=this;if(t.correction)try{Object(v["n"])(t.topicId,t.answerId,null,t.scores,t.picForSubjective,t.teacherId,t.teacherName),r()({message:"提交成功",position:"bottom"}),t.sharebtn="共享"}catch(e){r()({message:"提交失敗",position:"bottom"})}else r()({message:"请确认批改后再提交",position:"bottom"})},bse:function(){var t=this,e=this,s=$(".answer").jSignature("getData");Object(v["k"])(e.picForSubjective).then(function(i){t.imgawer=i.data.data.content;var n=document.createElement("canvas"),a=n.getContext("2d"),o=new Image;o.setAttribute("crossOrigin","anonymous"),o.src="data:image/png;base64,"+e.imgawer,o.onload=function(){n.width=this.width,n.height=this.height,console.log(this.width,this.height),a.drawImage(this,0,0);var t=new Image;t.setAttribute("crossOrigin","anonymous"),t.src=s,t.onload=function(){console.log(this.width,this.height),a.drawImage(this,0,0,772,1e3);for(var t=n.toDataURL("image/png",.5),s=t.split("data:image/png;base64,")[1],i=0;i<e.subjectiveAnswer.length;i++)e.subjectiveAnswer[i].id===e.subjectiveId&&Object(v["o"])(s).then(function(t){e.picForSubjective=t.data.data.stubForSubjective,console.log("成功"),e.correction=!0,e.cover_box=0,r()({message:"储存图片成功",position:"bottom"}),e.buttonSate=!0}).catch(function(t){console.log(t),r()({message:"储存图片失败",position:"bottom"}),e.buttonSate=!0})}}})},share:function(){var t=this;try{Object(v["p"])(t.topicId,t.answerId,null,t.scores,t.picForSubjective,t.teacherId,t.teacherName),r()({message:"共享成功",position:"bottom"})}catch(e){r()({message:"共享失敗",position:"bottom"})}}}},w=g,f=(s("6b22"),s("2877")),j=Object(f["a"])(w,i,n,!1,null,"47a0e88c",null);j.options.__file="show-subjective.vue";e["default"]=j.exports},d0e9:function(t,e,s){}}]);